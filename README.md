# UploadBot - Telegram –±–æ—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Shorts/TikTok –∏–∑ YouTube –≤–∏–¥–µ–æ

–≠—Ç–æ—Ç –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç YouTube –≤–∏–¥–µ–æ, –Ω–∞—Ä–µ–∑–∞–µ—Ç –∏—Ö –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏–µ —Ä–æ–ª–∏–∫–∏ –∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É –¥–ª—è TikTok/Shorts.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ —Å YouTube
- üé§ –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –∞—É–¥–∏–æ —á–µ—Ä–µ–∑ OpenAI Whisper
- ‚úÇÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Ä–µ–∑–∫–∞ –ø–æ —Å—Ü–µ–Ω–∞–º
- üîá –£–¥–∞–ª–µ–Ω–∏–µ —Ç–∏—Ö–∏—Ö —É—á–∞—Å—Ç–∫–æ–≤
- üì± –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (9:16)
- üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—É–±—Ç–∏—Ç—Ä–æ–≤
- üè∑Ô∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ö–µ—à—Ç–µ–≥–æ–≤
- ü§ñ LLM-—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è (OpenAI/Ollama)
- üéØ AI-–≤—ã–¥–µ–ª–µ–Ω–∏–µ –ª—É—á—à–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤
- ‚òÅÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Mail.ru Cloud

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Docker)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
git clone <your-repo-url>
cd UploadBot
cp env_example.txt .env
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env`:

```bash
nano .env
```

–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
```
TELEGRAM_BOT_TOKEN=your_bot_token_here
```

–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è LLM):
```
OPENAI_API_KEY=sk-your-openai-key
LLM_PROVIDER=openai  # –∏–ª–∏ ollama
```

### 3. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f bot

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

### GPU (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è GPU —Å Whisper:

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω nvidia-docker
docker-compose up -d
```

---

## –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- FFmpeg (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ)
- macOS/Linux/Windows

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cd UploadBot
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ FFmpeg

**macOS (Homebrew):**
```bash
brew install ffmpeg
```

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install ffmpeg
```

**Windows:**
–°–∫–∞—á–∞–π—Ç–µ —Å https://ffmpeg.org/download.html –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ PATH

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather –≤ Telegram
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env`

### 5. –ó–∞–ø—É—Å–∫

```bash
source venv/bin/activate
python bot.py
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/start`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ YouTube –≤–∏–¥–µ–æ
3. –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –≤–∏–¥–µ–æ

### –ö–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ |
| `/settings` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
| `/preview` | –ü—Ä–µ–≤—å—é –≤–∏–¥–µ–æ |
| `/moments` | –õ—É—á—à–∏–µ –º–æ–º–µ–Ω—Ç—ã |
| `/llm` | LLM —Å—Ç–∞—Ç—É—Å |
| `/gpu` | –ü—Ä–æ–≤–µ—Ä–∫–∞ GPU |
| `/cache` | –°—Ç–∞—Ç—É—Å –∫—ç—à–∞ |
| `/mailru` | –ü–æ–¥–∫–ª—é—á–∏—Ç—å Mail.ru |

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
UploadBot/
‚îú‚îÄ‚îÄ bot.py           # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª Telegram –±–æ—Ç–∞
‚îú‚îÄ‚îÄ download.py      # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ YouTube –≤–∏–¥–µ–æ
‚îú‚îÄ‚îÄ transcribe.py    # –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è —á–µ—Ä–µ–∑ Whisper
‚îú‚îÄ‚îÄ scenes.py       # –ù–∞—Ä–µ–∑–∫–∞ –ø–æ —Å—Ü–µ–Ω–∞–º
‚îú‚îÄ‚îÄ autoedit.py     # –£–¥–∞–ª–µ–Ω–∏–µ —Ç–∏—à–∏–Ω—ã
‚îú‚îÄ‚îÄ vertical.py      # –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∏ —Å—É–±—Ç–∏—Ç—Ä—ã
‚îú‚îÄ‚îÄ subtitles.py     # –°—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—É–±—Ç–∏—Ç—Ä—ã (ASS/SSA)
‚îú‚îÄ‚îÄ tagging.py      # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ö–µ—à—Ç–µ–≥–æ–≤
‚îú‚îÄ‚îÄ llm.py          # LLM-—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ moments.py      # AI-–ª—É—á—à–∏–µ –º–æ–º–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ mailru.py       # Mail.ru Cloud
‚îú‚îÄ‚îÄ cache.py        # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ settings.py     # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ utils.py        # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ Dockerfile      # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ .env
‚îî‚îÄ‚îÄ videos/         # –í–∏–¥–µ–æ —Ñ–∞–π–ª—ã
```

---

## Docker –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t uploadbot .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -d \
  --name uploadbot \
  -e TELEGRAM_BOT_TOKEN=your_token \
  -v $(pwd)/videos:/app/videos \
  -v $(pwd)/cache:/app/cache \
  uploadbot

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker logs -f uploadbot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker restart uploadbot

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker stop uploadbot && docker rm uploadbot
```

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–û—à–∏–±–∫–∞ —Å —Ç–æ–∫–µ–Ω–æ–º** - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` —Ñ–∞–π–ª
2. **FFmpeg –Ω–µ –Ω–∞–π–¥–µ–Ω** - –í Docker —É–∂–µ –≤–∫–ª—é—á–µ–Ω
3. **Whisper –æ—à–∏–±–∫–∏** - –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç –º–æ–¥–µ–ª—å
4. **GPU –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥—Ä–∞–π–≤–µ—Ä—ã NVIDIA

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
